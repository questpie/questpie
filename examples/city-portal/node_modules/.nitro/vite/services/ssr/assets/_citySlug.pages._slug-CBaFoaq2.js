import { jsxs, jsx } from "react/jsx-runtime";
import { useRouter } from "@tanstack/react-router";
import { u as useCollectionPreview, P as PreviewProvider, B as BlockRenderer, r as renderers } from "./index-BGKMlmAV.js";
import { b as Route } from "./router-DfekICpe.js";
import "react";
import "./utils-P1tbtlFB.js";
import "clsx";
import "tailwind-merge";
import "node:crypto";
import "node:async_hooks";
import "drizzle-orm";
import "drizzle-orm/pg-core";
import "zod";
import "node:os";
import "node:path";
import "../index.js";
import "@tanstack/react-router/ssr/server";
import "bun";
import "drizzle-orm/bun-sql";
import "drizzle-orm/pglite";
import "buffer";
import "path/posix";
import "path";
import "node:util";
import "crypto";
import "fs";
import "fs/promises";
import "url";
import "util";
import "assert";
import "drizzle-orm/casing";
import "node:fs";
import "node:events";
import "node:diagnostics_channel";
import "events";
import "worker_threads";
import "module";
import "prettier/plugins/html";
import "prettier/standalone";
import "node:stream";
import "http";
import "https";
import "zlib";
import "stream";
import "net";
import "dns";
import "os";
import "tls";
import "child_process";
import "node:assert";
import "node:timers/promises";
import "string_decoder";
function CityPage() {
  const {
    page
  } = Route.useLoaderData();
  if (!page) {
    return /* @__PURE__ */ jsxs("div", { className: "container mx-auto px-4 py-24 text-center", children: [
      /* @__PURE__ */ jsx("h1", { className: "text-4xl font-bold mb-4", children: "Page Not Found" }),
      /* @__PURE__ */ jsx("p", { className: "text-xl text-muted-foreground mb-8", children: "The page you are looking for does not exist or has been moved." }),
      /* @__PURE__ */ jsx("a", { href: "./", className: "text-primary hover:underline font-medium", children: "Go back home" })
    ] });
  }
  return /* @__PURE__ */ jsx(PageWithPreview, { page });
}
function PageWithPreview({
  page
}) {
  const router = useRouter();
  const {
    data,
    isPreviewMode,
    selectedBlockId,
    focusedField,
    handleFieldClick,
    handleBlockClick
  } = useCollectionPreview({
    initialData: page,
    onRefresh: () => router.invalidate()
  });
  return /* @__PURE__ */ jsx(PreviewProvider, { isPreviewMode, focusedField, onFieldClick: handleFieldClick, children: /* @__PURE__ */ jsxs("article", { className: isPreviewMode ? "preview-mode" : "", children: [
    /* @__PURE__ */ jsxs("header", { className: "container mx-auto px-6 py-12", children: [
      /* @__PURE__ */ jsx("h1", { className: "text-4xl font-bold tracking-tight", children: data.title }),
      data.excerpt && /* @__PURE__ */ jsx("p", { className: "mt-4 text-xl text-muted-foreground max-w-3xl", children: data.excerpt })
    ] }),
    data.content && /* @__PURE__ */ jsx(BlockRenderer, { content: data.content, renderers, data: data.content._data, selectedBlockId, onBlockClick: isPreviewMode ? handleBlockClick : void 0 }),
    !data.content?._tree?.length && !isPreviewMode && /* @__PURE__ */ jsx("div", { className: "py-16 text-center text-muted-foreground container mx-auto", children: /* @__PURE__ */ jsx("p", { children: "This page has no content yet." }) }),
    isPreviewMode && /* @__PURE__ */ jsx("div", { className: "fixed bottom-4 right-4 bg-blue-700 text-white px-4 py-2 rounded-full shadow-lg text-sm font-medium z-50", children: "Preview Mode - Click blocks to edit" })
  ] }) });
}
export {
  CityPage as component
};
