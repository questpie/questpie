---
title: React Hooks
description: Hooks for accessing admin data and functionality
---

# React Hooks

QUESTPIE Admin provides React hooks for accessing collections, globals, authentication, navigation, and server-provided widget data.

## Data Hooks

### useCollectionList

Fetch paginated collection items:

```typescript
import { useCollectionList } from "@questpie/admin/client";

function PostsList() {
  const {
    data,
    isLoading,
    error,
    fetchNextPage,
    hasNextPage,
  } = useCollectionList("posts", {
    limit: 25,
    where: { status: "published" },
    orderBy: { createdAt: "desc" },
  });

  if (isLoading) return <Loading />;
  if (error) return <Error error={error} />;

  return (
    <ul>
      {data.docs.map((post) => (
        <li key={post.id}>{post.title}</li>
      ))}
    </ul>
  );
}
```

### useCollectionItem

Fetch a single collection item:

```typescript
import { useCollectionItem } from "@questpie/admin/client";

function PostDetail({ id }: { id: string }) {
  const { data: post, isLoading } = useCollectionItem("posts", id);

  if (isLoading) return <Loading />;

  return <article>{post.title}</article>;
}
```

### useCollectionCreate

Create new items:

```typescript
import { useCollectionCreate } from "@questpie/admin/client";

function CreatePost() {
  const createPost = useCollectionCreate("posts");

  const handleSubmit = async (data) => {
    const post = await createPost.mutateAsync(data);
    console.log("Created:", post.id);
  };

  return <form onSubmit={handleSubmit}>...</form>;
}
```

### useCollectionUpdate

Update existing items:

```typescript
import { useCollectionUpdate } from "@questpie/admin/client";

function EditPost({ id }: { id: string }) {
  const updatePost = useCollectionUpdate("posts");

  const handleSubmit = async (data) => {
    await updatePost.mutateAsync({ id, data });
  };

  return <form onSubmit={handleSubmit}>...</form>;
}
```

### useCollectionDelete

Delete items:

```typescript
import { useCollectionDelete } from "@questpie/admin/client";

function DeleteButton({ id }: { id: string }) {
  const deletePost = useCollectionDelete("posts");

  return (
    <button
      onClick={() => deletePost.mutate(id)}
      disabled={deletePost.isPending}
    >
      Delete
    </button>
  );
}
```

### useGlobal

Fetch global data:

```typescript
import { useGlobal } from "@questpie/admin/client";

function SiteSettings() {
  const { data: settings, isLoading } = useGlobal("siteSettings");

  if (isLoading) return <Loading />;

  return <div>Site: {settings.siteName}</div>;
}
```

### useGlobalUpdate

Update global data:

```typescript
import { useGlobal, useGlobalUpdate } from "@questpie/admin/client";

function SettingsForm() {
  const { data: settings } = useGlobal("siteSettings");
  const updateSettings = useGlobalUpdate("siteSettings");

  const handleSubmit = async (data) => {
    await updateSettings.mutateAsync(data);
  };

  return <form onSubmit={handleSubmit}>...</form>;
}
```

## Widget Data Hooks

### useServerWidgetData

Fetch server-provided widget data. Used when a dashboard widget has a server-side `fetchFn`:

```typescript
import { useServerWidgetData } from "@questpie/admin/client";

function MyCustomWidget({ config }) {
  const { data, isLoading, error } = useServerWidgetData<{
    value: number;
    formatted: string;
  }>(config.id, {
    enabled: config.hasFetchFn,    // Only fetch if server has a fetchFn
    refreshInterval: 30000,         // Auto-refresh every 30s (optional)
  });

  if (isLoading) return <Spinner />;
  if (error) return <div>Error loading data</div>;

  return (
    <div>
      <span>{data?.formatted}</span>
    </div>
  );
}
```

**How it works:**

1. Server-side widgets with `fetchFn` get `hasFetchFn: true` in the client config
2. `useServerWidgetData` calls the `fetchWidgetData` RPC endpoint with the widget ID
3. Server executes the `fetchFn` with full context (CMS, DB, session) and returns the result
4. Data is cached and can auto-refresh via `refreshInterval`

**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `widgetId` | `string` | The widget's unique ID |
| `options.enabled` | `boolean` | Whether to fetch (default: `true`) |
| `options.refreshInterval` | `number` | Auto-refresh interval in ms |

See [Dashboard Configuration](/docs/admin/dashboard#server-side-data-fetching-fetchfn) for server-side `fetchFn` setup.

## Navigation Hooks

### useAdminRoutes

Access admin route helpers:

```typescript
import { useAdminRoutes } from "@questpie/admin/client";

function Navigation() {
  const { routes, navigate } = useAdminRoutes();

  return (
    <nav>
      <button onClick={() => navigate.dashboard()}>
        Dashboard
      </button>
      <button onClick={() => navigate.collection("posts")}>
        Posts
      </button>
      <button onClick={() => navigate.collectionCreate("posts")}>
        New Post
      </button>
    </nav>
  );
}
```

### Route Helpers

```typescript
const { navigate } = useAdminRoutes();

navigate.dashboard();                          // Dashboard
navigate.collection("posts");                  // Collection list
navigate.collectionCreate("posts");            // Create form
navigate.collectionEdit("posts", "post-id");   // Edit form
navigate.global("siteSettings");               // Global edit
```

## Store Hooks

### useAdminStore

Access the admin store:

```typescript
import { useAdminStore } from "@questpie/admin/client";

function AdminInfo() {
  const { admin, client, basePath } = useAdminStore((s) => ({
    admin: s.admin,
    client: s.client,
    basePath: s.basePath,
  }));

  return <div>Base path: {basePath}</div>;
}
```

### useAdminContext

Access admin context in any component:

```typescript
import { useAdminContext } from "@questpie/admin/client";

function MyComponent() {
  const { admin, collections, globals } = useAdminContext();

  return (
    <div>
      Collections: {Object.keys(collections).join(", ")}
    </div>
  );
}
```

## Auth Hooks

### useAuthClient

Access the Better Auth client:

```typescript
import { useAuthClient } from "@questpie/admin/client";

function UserMenu() {
  const authClient = useAuthClient();
  const session = authClient.useSession();

  if (!session.data) {
    return <LoginButton />;
  }

  return (
    <div>
      {session.data.user.email}
      <button onClick={() => authClient.signOut()}>
        Sign Out
      </button>
    </div>
  );
}
```

### useCurrentUser

Get the current user:

```typescript
import { useCurrentUser } from "@questpie/admin/client";

function Greeting() {
  const user = useCurrentUser();

  if (!user) return null;

  return <div>Hello, {user.name || user.email}</div>;
}
```

### useHasRole

Check user roles:

```typescript
import { useHasRole } from "@questpie/admin/client";

function AdminOnly({ children }) {
  const isAdmin = useHasRole("admin");

  if (!isAdmin) {
    return <div>Access denied</div>;
  }

  return children;
}
```

## Related

- [Dashboard](/docs/admin/dashboard) — Server-side widget `fetchFn` and `useServerWidgetData`
- [Field Types](/docs/admin/fields) — Customize form fields
- [Views](/docs/admin/views) — List and form views
