---
title: Collection Admin Configuration
description: Configure admin interface for your collections
---

# Collection Admin Configuration

Collection admin configurations define how your data is displayed and edited in the admin interface. These are configured on the **server** using chainable methods on the collection builder.

## Overview

```typescript
// src/questpie/server/collections/posts.ts
import { qb } from "../builder";

export const posts = qb
  .collection("posts")
  .fields((f) => ({...}))         // Database schema
  .title(({ f }) => f.title)      // Title field for display
  .admin(({ c }) => ({...}))      // Admin UI metadata
  .list(({ v, f, a }) => {...})   // List/table view
  .form(({ v, f }) => {...})      // Create/edit form
  .preview({...})                  // Live preview (optional)
  .actions(({ a, c, f }) => ({...})); // Custom actions (optional)
```

## `.admin()` — UI Metadata

Configure how the collection appears in navigation and headers:

```typescript
.admin(({ c }) => ({
  label: { en: "Blog Posts", sk: "Blogové príspevky" },
  icon: c.icon("ph:article"),
  description: { en: "Manage your blog content" },
  group: "Content",      // Sidebar grouping (for auto-generated sidebars)
  order: 1,              // Order within group
  hidden: false,         // Hide from sidebar
}))
```

Icons use the `c.icon("ph:icon-name")` helper which creates a serializable reference rendered by `@iconify/react` on the client.

## `.list()` — Table View

Configure the collection list page:

```typescript
.list(({ v, f, a }) => v.table({
  // Columns to display
  columns: [f.title, f.status, f.author, f.createdAt],

  // Default sorting
  defaultSort: { field: "createdAt", direction: "desc" },

  // Searchable fields
  searchable: ["title", "author"],

  // Filterable fields
  filterable: ["status", "author"],

  // Actions
  actions: {
    header: { primary: [a.create] },
    row: [a.duplicate, a.delete],
    bulk: [a.deleteMany],
  },
}))
```

The `({ v, f, a })` callback provides:
- **`v`** — View helpers: `v.table()`, `v.cards()`
- **`f`** — Field proxy with autocomplete for all defined fields
- **`a`** — Action helpers: `a.create`, `a.delete`, `a.duplicate`, etc.

### Empty Table Config

Pass an empty config to use defaults (shows all fields):

```typescript
.list(({ v }) => v.table({}))
```

See [Table View](/docs/admin/views/table-view) for all options.

## `.form()` — Edit Form

Configure the create/edit form:

```typescript
.form(({ v, f }) => v.form({
  // Sidebar layout
  sidebar: {
    position: "right",
    fields: [f.status, f.publishedAt, f.author],
  },

  // Main sections
  sections: [
    {
      label: { en: "Content" },
      description: { en: "Main article content" },
      fields: [f.title, f.slug, f.content],
    },
    {
      label: { en: "SEO" },
      collapsible: true,
      defaultCollapsed: true,
      fields: [f.metaTitle, f.metaDescription],
    },
  ],
}))
```

The `({ v, f })` callback provides:
- **`v`** — View helpers: `v.form()`, `v.wizard()`
- **`f`** — Field proxy with autocomplete

### Layout Options

Forms support various layouts:

```typescript
// Column layout
{
  label: { en: "Contact Info" },
  layout: "grid",
  columns: 2,
  fields: [f.firstName, f.lastName, f.email, f.phone],
}

// Tabs
v.form({
  tabs: [
    {
      label: { en: "Content" },
      icon: c.icon("ph:article"),
      sections: [
        { fields: [f.title, f.body] },
      ],
    },
    {
      label: { en: "Settings" },
      icon: c.icon("ph:gear"),
      sections: [
        { fields: [f.status, f.visibility] },
      ],
    },
  ],
})
```

See [Form Layouts](/docs/admin/views/form-layouts) for all options.

## `.preview()` — Live Preview

Enable real-time preview while editing:

```typescript
.preview({
  enabled: true,
  url: ({ record, locale }) => {
    const slug = record.slug || record.id;
    return `/posts/${slug}?preview=true&locale=${locale}`;
  },
  position: "right",    // "right" | "bottom"
  defaultWidth: 50,     // Percentage
})
```

See [Preview System](/docs/admin/preview) for details.

## `.actions()` — Custom Actions

Define server-side actions that can be triggered from the admin UI:

```typescript
.actions(({ a, c, f }) => ({
  // Built-in actions
  builtin: [a.create(), a.delete(), a.deleteMany(), a.duplicate()],

  // Custom actions
  custom: [
    // Simple action with confirmation
    a.action({
      id: "publish",
      label: { en: "Publish" },
      icon: c.icon("ph:arrow-up"),
      confirmation: {
        title: { en: "Publish Post?" },
        description: { en: "This will make the post visible to everyone." },
        confirmLabel: { en: "Publish" },
      },
      handler: async ({ itemId, db }) => {
        await db.update(posts).set({ status: "published" }).where(eq(posts.id, itemId));
        return { type: "success", toast: { message: "Post published!" } };
      },
    }),

    // Action with a form
    a.action({
      id: "send-email",
      label: { en: "Send Email" },
      icon: c.icon("ph:envelope"),
      form: {
        title: { en: "Send Email" },
        fields: {
          subject: f.text({ label: { en: "Subject" }, required: true }),
          message: f.textarea({ label: { en: "Message" } }),
        },
        width: "md",
      },
      handler: async ({ data, itemId }) => {
        await sendEmail({ to: "...", subject: data.subject, body: data.message });
        return {
          type: "success",
          toast: { message: "Email sent!" },
          effects: { closeModal: true },
        };
      },
    }),

    // Bulk action
    a.bulkAction({
      id: "archive-many",
      label: { en: "Archive Selected" },
      icon: c.icon("ph:archive"),
      variant: "destructive",
      confirmation: {
        title: { en: "Archive items?" },
        destructive: true,
      },
      handler: async ({ itemIds, db }) => {
        await db.update(posts).set({ status: "archived" }).where(inArray(posts.id, itemIds));
        return {
          type: "success",
          toast: { message: `${itemIds.length} items archived` },
          effects: { invalidate: true },
        };
      },
    }),
  ],
}))
```

### Action Handler Results

Action handlers return typed results:

```typescript
// Success
{ type: "success", toast: { message: "Done!" }, effects: { invalidate: true } }

// Error
{ type: "error", toast: { message: "Failed" }, errors: { email: "Invalid email" } }

// Redirect
{ type: "redirect", url: "/admin/collections/posts" }

// File download
{ type: "download", file: { name: "export.csv", content: csvData, mimeType: "text/csv" } }
```

### Action Form Field Types

Action forms support these field types via the `f` proxy:

```typescript
f.text()      f.email()      f.textarea()
f.number()    f.boolean()    f.date()
f.datetime()  f.time()       f.select()
f.json()      f.url()
```

## Complete Example

```typescript
// src/questpie/server/collections/appointments.ts
import { qb } from "../builder";

export const appointments = qb
  .collection("appointments")
  .fields((f) => ({
    customerName: f.text({ required: true }),
    customerEmail: f.email({ required: true }),
    customerPhone: f.text(),
    barber: f.relation({ to: "barbers", required: true }),
    service: f.relation({ to: "services", required: true }),
    scheduledAt: f.datetime({ required: true }),
    status: f.select({
      options: [
        { label: "Pending", value: "pending" },
        { label: "Confirmed", value: "confirmed" },
        { label: "Completed", value: "completed" },
        { label: "Cancelled", value: "cancelled" },
      ],
      default: "pending",
    }),
    notes: f.textarea(),
  }))
  .title(({ f }) => f.customerName)

  .admin(({ c }) => ({
    label: { en: "Appointments", sk: "Rezervácie" },
    icon: c.icon("ph:calendar-check"),
    group: "Bookings",
  }))

  .list(({ v, f, a }) => v.table({
    columns: [f.customerName, f.barber, f.service, f.scheduledAt, f.status],
    defaultSort: { field: "scheduledAt", direction: "desc" },
    searchable: ["customerName", "customerEmail"],
    filterable: ["status", "barber"],
    actions: {
      header: { primary: [a.create] },
      row: [a.duplicate, a.delete],
      bulk: [a.deleteMany],
    },
  }))

  .form(({ v, f }) => v.form({
    sidebar: {
      position: "right",
      fields: [f.status],
    },
    sections: [
      {
        label: { en: "Customer", sk: "Zákazník" },
        layout: "grid",
        columns: 2,
        fields: [f.customerName, f.customerEmail, f.customerPhone],
      },
      {
        label: { en: "Appointment", sk: "Rezervácia" },
        layout: "grid",
        columns: 2,
        fields: [f.barber, f.service, f.scheduledAt],
      },
      {
        label: { en: "Notes", sk: "Poznámky" },
        fields: [f.notes],
      },
    ],
  }))

  .actions(({ a, c, f }) => ({
    builtin: [a.create(), a.delete(), a.deleteMany()],
    custom: [
      a.action({
        id: "confirm",
        label: { en: "Confirm Appointment" },
        icon: c.icon("ph:check-circle"),
        handler: async ({ itemId, db }) => {
          await db.update(appointments).set({ status: "confirmed" }).where(eq(appointments.id, itemId));
          return { type: "success", toast: { message: "Appointment confirmed!" } };
        },
      }),
    ],
  }));
```

## Related

- [Field Types](/docs/admin/fields) — All 22+ field types
- [Table View](/docs/admin/views/table-view) — Configure list pages
- [Form View](/docs/admin/views/form-view) — Configure edit forms
- [Form Layouts](/docs/admin/views/form-layouts) — Layout options
- [Live Preview](/docs/admin/preview) — Real-time content preview
